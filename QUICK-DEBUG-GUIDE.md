# üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ—Ç–ª–∞–¥–∫–µ Miscord

## üîß –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

```javascript
// 1. –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞
voiceService.enableAudioDataLogging(true);

// 2. –ü–æ–ª—É—á–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –≥–æ–ª–æ—Å–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
const audioDiag = voiceService.diagnoseAudioIssues();
console.log('–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≥–æ–ª–æ—Å–∞:', audioDiag);

// 3. –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ WebSocket
const wsDebug = websocketService.getDebugInfo();
console.log('WebSocket –æ—Ç–ª–∞–¥–∫–∞:', wsDebug);

// 4. –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –≥–æ–ª–æ—Å–∞
const voiceDebug = voiceService.getDebugInfo();
console.log('–û–±—â–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≥–æ–ª–æ—Å–∞:', voiceDebug);
```

## üîç –ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º –ø–æ –ª–æ–≥–∞–º

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –Ω–∞–π–¥–∏—Ç–µ:

- `üîî` - WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `üéôÔ∏è` - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è  
- `üñ•Ô∏è` - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞
- `‚ùå` - –û—à–∏–±–∫–∏
- `‚ö†Ô∏è` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `‚úÖ` - –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "–ì–æ–ª–æ—Å –Ω–µ —Å–ª—ã—à–µ–Ω"
```javascript
// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
voiceService.diagnoseAudioIssues();

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö:
// - –ï—Å—Ç—å –ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
// - –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –ª–∏ peer connections  
// - –°–æ–∑–¥–∞–Ω—ã –ª–∏ –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã
// - –ù–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ autoplay
```

### 2. "WebSocket –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è"
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
websocketService.getDebugInfo();

// –ù–∞–π–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö:
// - –ü—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª—é—á–µ–Ω–∏–π
// - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
// - –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
```

### 3. "–ù–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"
```javascript
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)
fetch('/api/debug/websocket-stats')
  .then(r => r.json())
  .then(stats => console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:', stats));

// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
fetch('/api/debug/cleanup-connections', { method: 'POST' });
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–¥ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```javascript
// –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
voiceService.enableAudioDataLogging(true);

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
setInterval(() => {
    const wsStats = websocketService.getDebugInfo();
    const voiceStats = voiceService.getAudioMetrics();
    
    console.log('üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ WebSocket:', wsStats);
    console.log('üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–ª–æ—Å–∞:', voiceStats);
}, 10000);
```

## üõ†Ô∏è API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
```
GET /api/debug/websocket-stats
GET /api/debug/health
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏:
```
POST /api/debug/cleanup-connections
```

## üí° –†–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### Autoplay –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:
- –ö–ª–∏–∫–Ω–∏—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞

### –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WebRTC —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ª–æ–≥–∞—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üéØ –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É

```javascript
// –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
function fullDiagnosis() {
    console.log('üîç === –ü–û–õ–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê MISCORD ===');
    
    // WebSocket –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    console.log('üîî WebSocket:');
    console.log(websocketService.getDebugInfo());
    
    // –ì–æ–ª–æ—Å–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    console.log('üéôÔ∏è –ì–æ–ª–æ—Å:');
    const voiceDiag = voiceService.diagnoseAudioIssues();
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    console.log('üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:');
    voiceDiag.recommendations.forEach(rec => console.log(rec));
    
    console.log('üîç === –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê ===');
}

// –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
fullDiagnosis();
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º!